let restaurants,neighborhoods,cuisines,map,markers=[];const fillNeighborhoodsHTML=(e=neighborhoods)=>{const t=document.querySelector("[data-neighborhoods-select]");e.forEach(e=>{const r=document.createElement("option");r.innerHTML=e,r.value=e,t.append(r)})},fetchNeighborhoods=()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(neighborhoods=t,fillNeighborhoodsHTML())})},fillCuisinesHTML=(e=cuisines)=>{const t=document.querySelector("[data-cuisines-select]");e.forEach(e=>{const r=document.createElement("option");r.innerHTML=e,r.value=e,t.append(r)})},fetchCuisines=()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(cuisines=t,fillCuisinesHTML())})},createRestaurantHTML=e=>{const t=document.createElement("article");t.className="item";const r=document.createElement("div");r.className="img",r.style.backgroundImage=`url(${DBHelper.imageUrlForRestaurant(e)})`,r.setAttribute("tabindex","-1"),r.setAttribute("role","img"),r.setAttribute("aria-label",`Photo of '${e.name}' restaurant`),t.append(r);const n=document.createElement("h5");n.innerHTML=e.name,t.append(n);const o=document.createElement("p");o.innerHTML=e.neighborhood,t.append(o);const a=document.createElement("p");a.innerHTML=e.address,t.append(a);const s=document.createElement("a");return s.innerHTML="View Details",s.href=DBHelper.urlForRestaurant(e),t.append(s),t},resetRestaurants=e=>{restaurants=[],document.getElementById("results").innerHTML="",markers.forEach(e=>e.setMap(null)),markers=[],restaurants=e},addMarkersToMap=(e=restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,map);google.maps.event.addListener(t,"click",()=>{window.location.href=t.url}),markers.push(t)})},fillRestaurantsHTML=(e=restaurants)=>{const t=document.getElementById("results");e.forEach(e=>t.append(createRestaurantHTML(e))),addMarkersToMap()},updateRestaurants=()=>{const{value:e}=document.querySelector("[data-cuisines-select]"),{value:t}=document.querySelector("[data-neighborhoods-select]");DBHelper.fetchRestaurantByCuisineAndNeighborhood(e,t,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})};window.initMap=(()=>{map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),google.maps.event.addListenerOnce(map,"tilesloaded",()=>{document.querySelector("#map iframe").setAttribute("title","Google Map")}),updateRestaurants()}),document.addEventListener("DOMContentLoaded",()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(neighborhoods=t,fillNeighborhoodsHTML())}),DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(cuisines=t,fillCuisinesHTML())})});